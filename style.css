/* /style.css */

:root{
  --bg0:#fff2f7;
  --bg1:#fde7f2;
  --card:rgba(255,255,255,.72);
  --card2:rgba(255,255,255,.94);
  --ink:#2a1b26;
  --muted:rgba(42,27,38,.72);
  --ring:rgba(255,133,182,.35);
  --shadow:0 18px 55px rgba(43,18,33,.18);
  --shadow2:0 10px 35px rgba(43,18,33,.12);
  --border:rgba(255,255,255,.55);
  --accent:#ff5fa2;
  --radius2:24px;
}

[data-theme="dark"]{
  --bg0:#0f0a12;
  --bg1:#1b1020;
  --card:rgba(22,15,26,.62);
  --card2:rgba(22,15,26,.92);
  --ink:#f7e9f2;
  --muted:rgba(247,233,242,.72);
  --ring:rgba(255,133,182,.28);
  --shadow:0 18px 65px rgba(0,0,0,.52);
  --shadow2:0 10px 40px rgba(0,0,0,.38);
  --border:rgba(255,255,255,.12);
  --accent:#ff79b8;
}

*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
  color:var(--ink);
  overflow-x:hidden;
}

body.modal-open{ overflow:hidden; }

/* Background */
.bg{
  position:fixed;
  inset:0;
  background:
    radial-gradient(1200px 700px at 10% 10%, rgba(255,95,162,.18), transparent 65%),
    radial-gradient(900px 600px at 90% 25%, rgba(130,202,255,.18), transparent 60%),
    radial-gradient(800px 600px at 40% 95%, rgba(190,140,255,.16), transparent 62%),
    linear-gradient(160deg, var(--bg0), var(--bg1));
  filter:saturate(1.05);
  z-index:-2;
}

/* Topbar */
.topbar{
  position:sticky;
  top:0;
  z-index:10;
  padding:14px 16px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  backdrop-filter: blur(14px);
  background: linear-gradient(to bottom, rgba(255,255,255,.35), rgba(255,255,255,.08));
  border-bottom:1px solid var(--border);
}
[data-theme="dark"] .topbar{
  background: linear-gradient(to bottom, rgba(10,6,12,.55), rgba(10,6,12,.18));
}

.brand{
  display:flex;
  align-items:center;
  gap:10px;
  min-width:180px;
}
.brand__dot{
  width:12px;height:12px;border-radius:999px;
  background: radial-gradient(circle at 30% 30%, #fff, var(--accent));
  box-shadow:0 0 0 6px rgba(255,95,162,.12);
}
.brand__title{ font-weight:900; letter-spacing:.2px; }
.brand__sub{ font-size:12px; color:var(--muted); margin-top:1px; }

.controls{ display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end; }

/* Buttons (touch-friendly for phones) */
.btn{
  border:1px solid var(--border);
  background:var(--card2);
  color:var(--ink);
  padding:10px 12px;
  border-radius:999px;
  box-shadow:var(--shadow2);
  cursor:pointer;
  display:inline-flex;
  align-items:center;
  gap:8px;
  transition: transform 140ms ease, box-shadow 140ms ease, filter 140ms ease;
  user-select:none;
  min-height:44px; /* mobile tap target */
}
.btn--ghost{ background:var(--card); }
.btn:hover{ transform: translateY(-1px); filter:saturate(1.03); }
.btn:active{ transform: translateY(0) scale(.99); }
.btn:focus-visible{ outline:none; box-shadow:0 0 0 5px var(--ring), var(--shadow2); }
.btn__text{ font-weight:750; font-size:13px; }

/* Layout */
.wrap{ max-width:1080px; margin:0 auto; padding:22px 16px 40px; }
.hero{ padding:16px 14px 18px; }
.hero__title{ margin:0; font-size:34px; letter-spacing:-.6px; }
.hero__desc{ margin:8px 0 0; max-width:62ch; color:var(--muted); line-height:1.45; }

.grid{
  display:grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap:14px;
  padding:8px 0 10px;
}
@media (min-width:720px){
  .grid{ grid-template-columns: repeat(4, minmax(0, 1fr)); gap:16px; }
}
@media (min-width:980px){
  .grid{ grid-template-columns: repeat(7, minmax(0, 1fr)); }
}

/* Cards */
.card3d{ perspective:1100px; }
.card{
  position:relative;
  height:190px;
  border-radius:var(--radius2);
  transform-style:preserve-3d;
  transition: transform 700ms cubic-bezier(.2,.9,.2,1), box-shadow 220ms ease;
  cursor:pointer;
  box-shadow:var(--shadow2);
}
.card:hover{ box-shadow:var(--shadow); }
.card.is-flipped{ transform: rotateY(180deg); cursor:default; }

.face{
  position:absolute;
  inset:0;
  border-radius:var(--radius2);
  border:1px solid var(--border);
  backface-visibility:hidden;
  overflow:hidden;
}

.front{
  background: linear-gradient(145deg, rgba(255,255,255,.78), rgba(255,255,255,.48));
  display:grid;
  place-items:center;
}
[data-theme="dark"] .front{
  background: linear-gradient(145deg, rgba(28,18,33,.8), rgba(18,12,24,.55));
}

.front__inner{
  width:86%;
  height:86%;
  border-radius:22px;
  border:1px dashed rgba(255,95,162,.35);
  display:grid;
  place-items:center;
  position:relative;
}
.front__badge{
  position:absolute;
  top:12px; left:12px;
  font-size:12px;
  padding:6px 10px;
  border-radius:999px;
  background: rgba(255,95,162,.13);
  border:1px solid rgba(255,95,162,.22);
}
.front__icon{
  font-size:36px;
  filter: drop-shadow(0 10px 18px rgba(0,0,0,.12));
  animation: iconBop 1.9s ease-in-out infinite;
}
@keyframes iconBop{
  0%,100%{ transform: translateY(0) rotate(-2deg); }
  50%{ transform: translateY(-2px) rotate(2deg); }
}
.front__hint{
  position:absolute;
  bottom:10px;
  font-size:12px;
  color:var(--muted);
}

.back{
  transform: rotateY(180deg);
  background: linear-gradient(145deg, rgba(255,255,255,.9), rgba(255,255,255,.6));
  padding:12px;
  display:grid;
  grid-template-rows: 1fr auto;
  gap:10px;
}
[data-theme="dark"] .back{
  background: linear-gradient(145deg, rgba(24,16,30,.92), rgba(16,10,22,.6));
}

.reveal{
  display:grid;
  place-items:center;
  border-radius:18px;
  border:1px solid rgba(255,255,255,.35);
  background:
    radial-gradient(180px 120px at 50% 38%, rgba(255,95,162,.16), transparent 62%),
    radial-gradient(180px 120px at 30% 70%, rgba(130,202,255,.14), transparent 62%),
    radial-gradient(180px 120px at 70% 70%, rgba(190,140,255,.12), transparent 62%);
  min-height:116px;
}

.msg{
  font-size:12.6px;
  line-height:1.25;
  padding:10px;
  border-radius:16px;
  background: rgba(255,255,255,.55);
  border:1px solid rgba(255,255,255,.38);
  max-height:42px;
  overflow:hidden;
  text-overflow:ellipsis;
}
[data-theme="dark"] .msg{
  background: rgba(10,6,14,.4);
  border:1px solid rgba(255,255,255,.12);
}

.note{ padding-top:10px; }
.note__pill{
  display:inline-block;
  padding:8px 12px;
  border-radius:999px;
  background:var(--card);
  border:1px solid var(--border);
  color:var(--muted);
  box-shadow:var(--shadow2);
  font-size:12px;
}

.footer{
  padding:18px 16px 26px;
  text-align:center;
  color:var(--muted);
  font-size:12px;
}

/* Flowers: animation */
.flowerSvg{
  width:110px;
  height:110px;
  filter: drop-shadow(0 16px 16px rgba(0,0,0,.18));
}
@keyframes sway{
  0%,100%{ transform: rotate(-2deg) translateY(0); }
  50%{ transform: rotate(2deg) translateY(-2px); }
}
@keyframes bloom{
  0%{ transform: scale(.82); opacity:.55; }
  60%{ transform: scale(1.06); opacity:1; }
  100%{ transform: scale(1); }
}
@keyframes sparkle{
  0%{ opacity:0; transform: scale(.6) rotate(0deg); }
  35%{ opacity:.9; }
  100%{ opacity:0; transform: scale(1.25) rotate(25deg); }
}
.fWrap{ transform-origin:50% 85%; animation:sway 2.6s ease-in-out infinite; }
.fBloom{ transform-origin:50% 55%; animation:bloom 1.1s ease-out both; }
.spark{ transform-origin:center; animation:sparkle 1.4s ease-in-out infinite; animation-delay: var(--d, 0ms); }

/* ===== Fullscreen Modal Overlay (Pick again ALWAYS visible) ===== */
.modal{
  position:fixed;
  inset:0;
  z-index:99999;
  display:none;
}
.modal.is-open{ display:block; }

/* Use fixed so iPhone/Android cover whole screen */
.modal__backdrop{
  position:fixed;
  inset:0;
  background: rgba(10,6,14,.55);
  backdrop-filter: blur(12px);
}
/* fallback if blur unsupported */
@supports not ((backdrop-filter: blur(1px))){
  .modal__backdrop{ background: rgba(10,6,14,.70); }
}

.modal__panel{
  position:fixed;
  left:50%;
  top:50%;
  transform: translate(-50%,-50%);
  width: min(680px, calc(100vw - 24px));
  /* svh fixes mobile browser UI bars */
  max-height: calc(100svh - 24px);
  border-radius: 26px;
  border: 1px solid var(--border);
  background: var(--card2);
  box-shadow: var(--shadow);
  overflow:hidden;

  /* key: footer stays visible */
  display:flex;
  flex-direction:column;

  animation: popIn .22s ease-out;
}
@keyframes popIn{
  from{ transform: translate(-50%,-48%) scale(.96); opacity:0; }
  to{ transform: translate(-50%,-50%) scale(1); opacity:1; }
}
[data-theme="dark"] .modal__panel{ background: rgba(18,12,24,.88); }

.modal__top{
  padding:12px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  border-bottom:1px solid var(--border);
  background: linear-gradient(to bottom, rgba(255,255,255,.4), rgba(255,255,255,.12));
  flex: 0 0 auto;
}
[data-theme="dark"] .modal__top{
  background: linear-gradient(to bottom, rgba(10,6,14,.55), rgba(10,6,14,.15));
}

.modal__title{
  display:inline-flex;
  align-items:center;
  gap:10px;
  font-weight:900;
  letter-spacing:-.2px;
  padding-left:6px;
}
.modal__emoji{ font-size:18px; }

/* key: content scrolls, footer stays */
.modal__content{
  padding:14px;
  display:grid;
  gap:12px;
  overflow:auto;
  flex: 1 1 auto;
  -webkit-overflow-scrolling: touch;
}

.modal__reveal{
  display:grid;
  place-items:center;
  border-radius:22px;
  border:1px solid rgba(255,255,255,.35);
  background:
    radial-gradient(260px 180px at 50% 35%, rgba(255,95,162,.22), transparent 62%),
    radial-gradient(220px 160px at 25% 75%, rgba(130,202,255,.18), transparent 62%),
    radial-gradient(220px 160px at 75% 75%, rgba(190,140,255,.15), transparent 62%);
  min-height: 260px;
}

.modal__msg{
  padding:14px;
  border-radius:18px;
  background: rgba(255,255,255,.55);
  border: 1px solid rgba(255,255,255,.38);
  line-height:1.5;
  font-size:15px;
  word-break: break-word;
}
[data-theme="dark"] .modal__msg{
  background: rgba(10,6,14,.36);
  border: 1px solid rgba(255,255,255,.12);
}

.modal__actions{
  padding:12px 14px;
  display:flex;
  justify-content:center;
  border-top:1px solid var(--border);
  flex: 0 0 auto;

  /* iPhone safe area so button never hides behind the bottom bar */
  padding-bottom: calc(12px + env(safe-area-inset-bottom));
}

/* Bigger flower in modal, responsive */
.modal .flowerSvg {
  width: clamp(180px, 35vw, 270px);
  height: clamp(180px, 35vw, 270px);
  filter: drop-shadow(0 22px 22px rgba(0,0,0,.22));
}
@media (min-width:520px){
  .modal .flowerSvg{ width: 270px; height: 270px; }
}
@media (max-width:420px){
  .modal .flowerSvg{ width: 200px; height: 200px; }
  .modal__reveal{ min-height: 220px; }
}
